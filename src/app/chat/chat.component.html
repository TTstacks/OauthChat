<div class = "flex justify-center items-center h-svh">
    <div class = "relative w-11/12 sm:w-11/12 md:w-3/4 lg:w-1/2 border-1 border-gray-100 h-[35rem] shadow-[2px_2px_5px_rgba(0,0,0,0.1)] flex-col">
        <div #chatView class = "w-full h-full p-2 ml-3 mt-1 overflow-y-auto pb-20">
            @for(message of messages; track $index){
                @if(message.profile.id != user!.id){
                    <div class = "flex mb-4">
        
                        <img src="{{message.profile.avatar_url}}" class = "rounded-full w-8 h-8 mr-1">
                        <div>
                            <div class="mb-0.5">
                                {{message.profile.full_name}}
                            </div>
                            <div class = "max-w-[28rem] break-all  bg-gray-100 pl-3 pb-4 pr-3 pt-1.5 rounded-b-xl rounded-tr-xl">
                                {{message.text}}
                            </div>
                        </div>
                    </div>
                }
                @else {

                    <div class = "flex justify-end mr-3 mb-4">
                        <div>
                            <div class="mb-0.5 text-right">
                                {{message.profile.full_name}}
                            </div>
                            <div class = "max-w-[28rem] break-all bg-blue-100 text-gray-900 pl-3 pb-4 pr-3 pt-1.5 rounded-b-xl rounded-tl-xl text-left">
                                {{message.text}} 
                            </div>
                        </div>
                        <img src="{{message.profile.avatar_url}}" class = "rounded-full w-8 h-8 ml-1">
                    </div>
                }
            }
        </div>

        <div class = "absolute left-0 right-0 -bottom-1 h-20 bg-blue-50">

        </div>
        <div class = "absolute left-0 right-0 bottom-2">
            <div class = "flex justify-center w-full">

                <form class = "relative p-2 w-4/5 bg-white border-2 border-gray-100 rounded-xl shadow-[0px_0px_5px_rgba(0,0,0,0.06)] flex items-center" [formGroup]="messageForm" (ngSubmit)="submit()">
                    <div class="w-full pr-14 ml-1 py-1">
                        <textarea #messageArea formControlName="text" (input) = "messageInputGrow($event)"  placeholder = "type something..." class = "field-sizing-content w-full h-auto max-h-28 focus:outline-none placeholder:text-gray-400 resize-none overflow-auto"></textarea>

                    </div>
                    
                    
                    <button type="submit" class="absolute right-2 bottom-2 rounded-2xl p-2 shrink-0  bg-blue-500 shadow-[1px_1px_5px_rgba(0,0,0,0.3)] hover:inset-shadow-[0px_0px_20px_rgba(0,0,0,0.3)]">
                        <svg class="text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="white" viewBox="0 0 24 24">
                            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m12 18-7 3 7-18 7 18-7-3Zm0 0v-5"/>
                        </svg>
                    </button>
                </form>
            </div>
        </div>
    </div>
</div>